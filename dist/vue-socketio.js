!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueSocketIO=t():e.VueSocketIO=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){"use strict";o.r(t);var n={beforeCreate(){this.sockets||(this.sockets={}),this.sockets.subscribe=(e,t)=>{this.$vueSocketIo.emitter.addListener(e,t,this)},this.sockets.unsubscribe=e=>{this.$vueSocketIo.emitter.removeListener(e,this)}},mounted(){this.$options.sockets&&Object.keys(this.$options.sockets).forEach(e=>{"subscribe"!==e&&"unsubscribe"!==e&&this.$vueSocketIo.emitter.addListener(e,this.$options.sockets[e],this)})},beforeDestroy(){this.$options.sockets&&Object.keys(this.$options.sockets).forEach(e=>{this.$vueSocketIo.emitter.removeListener(e,this)})}};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.debug=!1,this.prefix="%cVue-Socket.io: "}var t,o,n;return t=e,(o=[{key:"info",value:function(e,t=""){this.debug&&window.console.info(this.prefix+`%c${e}`,"color: blue; font-weight: 600","color: #333333",t)}},{key:"error",value:function(){this.debug&&window.console.error(this.prefix,...arguments)}},{key:"warn",value:function(){this.debug&&window.console.warn(this.prefix,...arguments)}},{key:"event",value:function(e,t=""){this.debug&&window.console.info(this.prefix+`%c${e}`,"color: blue; font-weight: 600","color: #333333",t)}}])&&i(t.prototype,o),n&&i(t,n),e}());function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}let c=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.io=t,this.register(),this.emitter=o}var t,o,n;return t=e,(o=[{key:"register",value:function(){this.io.onevent=e=>{let[t,...o]=e.data;1===o.length&&(o=o[0]),this.onEvent(t,o)},e.staticEvents.forEach(e=>this.io[e]=t=>this.onEvent(e,t))}},{key:"onEvent",value:function(e,t){this.emitter.emit(e,t)}}])&&r(t.prototype,o),n&&r(t,n),e}();var a,u,f;function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}f=["onopen","onerror","onmessage","onclose"],(u="staticEvents")in(a=c)?Object.defineProperty(a,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[u]=f;let p=function(){function e(t={}){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.info(t?"Vuex adapter enabled":"Vuex adapter disabled"),s.info(t.mutationPrefix?"Vuex socket mutations enabled":"Vuex socket mutations disabled"),s.info(t?"Vuex socket actions enabled":"Vuex socket actions disabled"),this.store=t.store,this.actionPrefix=t.actionPrefix?t.actionPrefix:"SOCKET_",this.mutationPrefix=t.mutationPrefix,this.listeners=new Map}var t,o,n;return t=e,(o=[{key:"addListener",value:function(e,t,o){if("function"!=typeof t)throw new Error("callback must be a function");this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push({callback:t,component:o}),s.info(`#${e} subscribe, component: ${o.$options.name}`)}},{key:"removeListener",value:function(e,t){if(this.listeners.has(e)){const o=this.listeners.get(e).filter(e=>e.component!==t);o.length>0?this.listeners.set(e,o):this.listeners.delete(e),s.info(`#${e} unsubscribe, component: ${t.$options.name}`)}}},{key:"emit",value:function(e,t){this.listeners.has(e)&&(s.info(`Broadcasting: #${e}, Data:`,t),this.listeners.get(e).forEach(e=>{e.callback.call(e.component,t)})),"ping"!==e&&"pong"!==e&&this.dispatchStore(e,t)}},{key:"dispatchStore",value:function(e,t){if(this.store&&this.store._actions){let o=this.actionPrefix+e;for(let e in this.store._actions)e.split("/").pop()===o&&(s.info(`Dispatching Action: ${e}, Data:`,t),this.store.dispatch(e,t));if(this.mutationPrefix){let o=this.mutationPrefix+e;for(let e in this.store._mutations)e.split("/").pop()===o&&(s.info(`Commiting Mutation: ${e}, Data:`,t),this.store.commit(e,t))}}}}])&&l(t.prototype,o),n&&l(t,n),e}();function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}o.d(t,"default",function(){return b});let b=function(){function e({connection:t,vuex:o,debug:n,options:i}){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.debug=n,this.io=this.connect(t,i),this.useConnectionNamespace=i&&i.useConnectionNamespace,this.namespaceName=i&&i.namespaceName,this.emitter=new p(o),this.listener=new c(this.io,this.emitter)}var t,o,i;return t=e,(o=[{key:"install",value:function(e){const t=this.namespaceName||"";this.useConnectionNamespace?"object"==typeof e.prototype.$socket?(e.prototype.$socket={...e.prototype.$socket,[t]:this.io},e.prototype.$vueSocketIo={...e.prototype.$vueSocketIo,[t]:this}):(e.prototype.$socket={[t]:this.io},e.prototype.$vueSocketIo={[t]:this}):(e.prototype.$socket=this.io,e.prototype.$vueSocketIo=this),e.mixin(n),s.info("Vue-Socket.io plugin enabled")}},{key:"connect",value:function(e,t){if(e&&"object"==typeof e)return s.info("Received socket.io-client instance"),e;if("string"==typeof e){const t=new WebSocket(e);return s.info("Received connection string"),this.io=t}throw new Error("Unsupported connection type")}}])&&h(t.prototype,o),i&&h(t,i),e}()}]).default});